<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?> <!-- Đảm bảo import đầy đủ -->
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<AnchorPane fx:id="supplierImportPane" prefHeight="720.0" prefWidth="1050.0" style="-fx-background-color: #EBF8FF;" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.stores.controller.SupplierAndImportManagementController">
    <children>
        <VBox spacing="15.0" AnchorPane.bottomAnchor="10.0" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0" AnchorPane.topAnchor="10.0">
            <children>
                <Label text="%supplierImport.title" textFill="#2C5282"> <!-- KEY -->
                    <font><Font name="System Bold" size="24.0" /></font>
                </Label>
                <TabPane fx:id="mainTabPaneSupplierImport" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
                    <tabs>
                        <!-- TAB 1: QUẢN LÝ NHÀ CUNG CẤP -->
                        <Tab fx:id="tabManageSuppliers" text="%tab.manageSuppliers"> <!-- KEY -->
                            <content>
                                <BorderPane>
                                    <center>
                                        <VBox spacing="10.0" style="-fx-padding: 10px;">
                                            <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                <TextField fx:id="txtSearchSupplier" prefWidth="300.0" promptText="%search.prompt.supplier" /> <!-- KEY -->
                                                <Button fx:id="btnSearchSupplier" mnemonicParsing="false" onAction="#handleSearchSupplierAction" text="%button.searchSupplier" /> <!-- KEY -->
                                                <Button fx:id="btnRefreshSupplierTable" mnemonicParsing="false" onAction="#handleRefreshSupplierTableAction" text="%button.refreshTable" /> <!-- KEY -->
                                            </HBox>
                                            <TableView fx:id="supplierTableView" VBox.vgrow="ALWAYS">
                                                <columns>
                                                    <TableColumn fx:id="colSupplierID" prefWidth="70.0" text="%table.col.supplierId" /> <!-- KEY -->
                                                    <TableColumn fx:id="colSupplierName" prefWidth="200.0" text="%table.col.supplierName" /> <!-- KEY -->
                                                    <TableColumn fx:id="colSupplierEmail" prefWidth="200.0" text="%table.col.email" /> <!-- KEY -->
                                                    <TableColumn fx:id="colSupplierPhone" prefWidth="110.0" text="%table.col.phone" /> <!-- KEY -->
                                                    <TableColumn fx:id="colSupplierAddress" prefWidth="250.0" text="%table.col.address" /> <!-- KEY -->
                                                    <TableColumn fx:id="colSupplierTaxCode" prefWidth="100.0" text="%table.col.taxCode" /> <!-- KEY -->
                                                </columns>
                                                <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                                                <placeholder><Label text="%table.placeholder.noSuppliers" /></placeholder> <!-- KEY -->
                                            </TableView>
                                        </VBox>
                                    </center>
                                    <right>
                                        <VBox spacing="10.0" prefWidth="350.0" style="-fx-border-color: #CBD5E0; -fx-border-width: 0 0 0 1; -fx-padding: 10;">
                                            <Label text="%supplier.form.title" style="-fx-font-size: 16px; -fx-font-weight: bold;" /> <!-- KEY -->
                                            <GridPane hgap="10.0" vgap="8.0">
                                                <!-- ... columnConstraints, rowConstraints ... -->
                                                <children>
                                                    <Label text="%label.supplierId" /> <!-- KEY -->
                                                    <TextField fx:id="txtSupplierID" editable="false" promptText="%prompt.autoGenerated" GridPane.columnIndex="1" /> <!-- KEY -->
                                                    <Label text="%label.supplierName" GridPane.rowIndex="1" /> <!-- KEY -->
                                                    <TextField fx:id="txtSupplierName" promptText="%prompt.supplierName" GridPane.columnIndex="1" GridPane.rowIndex="1" /> <!-- KEY -->
                                                    <Label text="%label.email" GridPane.rowIndex="2" /> <!-- KEY -->
                                                    <TextField fx:id="txtSupplierEmail" promptText="%prompt.email" GridPane.columnIndex="1" GridPane.rowIndex="2" /> <!-- KEY -->
                                                    <Label text="%label.phone" GridPane.rowIndex="3" /> <!-- KEY -->
                                                    <TextField fx:id="txtSupplierPhone" promptText="%prompt.phone" GridPane.columnIndex="1" GridPane.rowIndex="3" /> <!-- KEY -->
                                                    <Label text="%label.address" GridPane.rowIndex="4" GridPane.valignment="TOP"/> <!-- KEY -->
                                                    <TextArea fx:id="txtSupplierAddress" prefHeight="50.0" wrapText="true" promptText="%prompt.address" GridPane.columnIndex="1" GridPane.rowIndex="4" /> <!-- KEY -->
                                                    <Label text="%label.taxCode" GridPane.rowIndex="5" /> <!-- KEY -->
                                                    <TextField fx:id="txtSupplierTaxCode" promptText="%prompt.taxCode" GridPane.columnIndex="1" GridPane.rowIndex="5" /> <!-- KEY -->
                                                </children>
                                            </GridPane>
                                            <HBox spacing="10.0" alignment="CENTER_RIGHT">
                                                <Button fx:id="btnAddSupplier" mnemonicParsing="false" onAction="#handleAddSupplierAction" style="..." text="%button.addSupplier" /> <!-- KEY -->
                                                <Button fx:id="btnUpdateSupplier" mnemonicParsing="false" onAction="#handleUpdateSupplierAction" style="..." text="%button.updateSupplier" /> <!-- KEY -->
                                                <Button fx:id="btnDeleteSupplier" mnemonicParsing="false" onAction="#handleDeleteSupplierAction" style="..." text="%button.deleteSupplier" /> <!-- KEY -->
                                                <Button fx:id="btnClearSupplierForm" mnemonicParsing="false" onAction="#handleClearSupplierFormAction" text="%button.clearForm" /> <!-- KEY -->
                                            </HBox>
                                            <Label fx:id="lblSupplierStatus" wrapText="true"/>
                                        </VBox>
                                    </right>
                                </BorderPane>
                            </content>
                        </Tab>

                        <!-- TAB 2: QUẢN LÝ PHIẾU NHẬP HÀNG -->
                        <Tab fx:id="tabManageImportReceipts" text="%tab.manageImportReceipts"> <!-- KEY -->
                            <content>
                                <BorderPane>
                                    <top>
                                        <VBox spacing="10.0" style="-fx-padding: 10px;">
                                            <HBox spacing="10.0" alignment="CENTER_LEFT">
                                                <Label text="%label.filterReceiptFromDate" /> <!-- KEY -->
                                                <DatePicker fx:id="dpImportStartDate" prefWidth="130.0" />
                                                <Label text="%label.filterReceiptToDate" /> <!-- KEY -->
                                                <DatePicker fx:id="dpImportEndDate" prefWidth="130.0" />
                                                <Label text="%label.supplier" /> <!-- KEY -->
                                                <ComboBox fx:id="cmbFilterImportBySupplier" prefWidth="180.0" promptText="%prompt.allSuppliers" /> <!-- KEY -->
                                                <Button fx:id="btnFilterImportReceipts" mnemonicParsing="false" onAction="#handleFilterImportReceiptsAction" text="%button.filterReceipts" /> <!-- KEY -->
                                                <Button fx:id="btnRefreshImportReceiptTable" mnemonicParsing="false" onAction="#handleRefreshImportReceiptTableAction" text="%button.refreshTable" /> <!-- KEY -->
                                            </HBox>
                                            <Button fx:id="btnShowCreateImportReceiptPane" mnemonicParsing="false" onAction="#handleShowCreateImportReceiptPaneAction" text="%button.createImportReceipt" style="..."> <!-- KEY -->
                                                <VBox.margin><Insets top="10.0" /></VBox.margin>
                                            </Button>
                                        </VBox>
                                    </top>
                                    <center>
                                        <TableView fx:id="importReceiptTableView" prefHeight="200.0" prefWidth="200.0">
                                            <columns>
                                                <TableColumn fx:id="colReceiptID" prefWidth="70.0" text="%table.col.receiptId" /> <!-- KEY -->
                                                <TableColumn fx:id="colReceiptImportDate" prefWidth="150.0" text="%table.col.importDate" /> <!-- KEY -->
                                                <TableColumn fx:id="colReceiptSupplierName" prefWidth="200.0" text="%table.col.supplierName" /> <!-- KEY -->
                                                <TableColumn fx:id="colReceiptEmployeeName" prefWidth="150.0" text="%table.col.employeeName" /> <!-- KEY -->
                                                <TableColumn fx:id="colReceiptWarehouseName" prefWidth="150.0" text="%table.col.warehouseName" /> <!-- KEY -->
                                                <TableColumn fx:id="colReceiptTotalAmount" prefWidth="120.0" text="%table.col.totalAmount" /> <!-- KEY -->
                                                <TableColumn fx:id="colReceiptNote" prefWidth="150.0" text="%table.col.notes" /> <!-- KEY -->
                                                <TableColumn fx:id="colReceiptViewDetails" prefWidth="100.0" text="%table.col.details"/> <!-- KEY -->
                                            </columns>
                                            <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                                            <placeholder><Label text="%table.placeholder.noImportReceipts" /></placeholder> <!-- KEY -->
                                        </TableView>
                                    </center>
                                    <bottom>
                                        <AnchorPane fx:id="createImportReceiptAnchorPane" managed="false" visible="false" BorderPane.alignment="CENTER">
                                            <VBox spacing="10.0" style="-fx-padding: 15px; -fx-border-color: lightgray; -fx-border-width: 1px; -fx-background-color: #F9FAFB;">
                                                <Label fx:id="lblCreateImportTitle" text="%import.receipt.title.new" style="-fx-font-size: 18px; -fx-font-weight: bold;"/> <!-- KEY -->
                                                <GridPane hgap="10.0" vgap="8.0">
                                                    <!-- ... columnConstraints, rowConstraints ... -->
                                                    <children>
                                                        <Label text="%label.supplier"/> <!-- KEY -->
                                                        <ComboBox fx:id="cmbImportSupplier" prefWidth="250.0" promptText="%prompt.selectSupplier" GridPane.columnIndex="1"/> <!-- KEY -->
                                                        <Label text="%label.importEmployee" GridPane.columnIndex="2"/> <!-- KEY -->
                                                        <ComboBox fx:id="cmbImportEmployee" prefWidth="250.0" promptText="%prompt.selectEmployee" GridPane.columnIndex="3"/> <!-- KEY -->
                                                        <Label text="%label.importWarehouse" GridPane.rowIndex="1"/> <!-- KEY -->
                                                        <ComboBox fx:id="cmbImportWarehouse" prefWidth="250.0" promptText="%prompt.selectWarehouse" GridPane.columnIndex="1" GridPane.rowIndex="1"/> <!-- KEY -->
                                                        <Label text="%label.importDate" GridPane.columnIndex="2" GridPane.rowIndex="1"/> <!-- KEY -->
                                                        <DatePicker fx:id="dpImportDate" prefWidth="250.0" GridPane.columnIndex="3" GridPane.rowIndex="1"/>
                                                        <Label text="%label.receiptNotes" GridPane.rowIndex="2" GridPane.valignment="TOP"/> <!-- KEY -->
                                                        <TextArea fx:id="txtImportReceiptNote" prefHeight="50.0" wrapText="true" GridPane.columnIndex="1" GridPane.rowIndex="2" GridPane.columnSpan="3"/>
                                                    </children>
                                                </GridPane>
                                                <Label text="%label.importProductDetails" style="-fx-font-weight: bold;"/> <!-- KEY -->
                                                <HBox spacing="10.0" alignment="CENTER_LEFT">
                                                    <Label text="%label.product"/> <!-- KEY -->
                                                    <ComboBox fx:id="cmbImportProduct" prefWidth="250.0" promptText="%prompt.selectProduct"/> <!-- KEY -->
                                                    <Label text="%label.quantity"/> <!-- KEY -->
                                                    <Spinner fx:id="spinnerImportQuantity" editable="true" initialValue="1" max="9999" min="1" prefWidth="80.0"/>
                                                    <Label text="%label.unitCostImport"/> <!-- KEY -->
                                                    <TextField fx:id="txtImportUnitCost" prefWidth="120.0" promptText="0"/>
                                                    <Button fx:id="btnAddImportDetail" onAction="#handleAddImportDetailAction" text="%button.addProductShort"/> <!-- KEY -->
                                                </HBox>
                                                <TableView fx:id="importReceiptDetailTableView" prefHeight="150.0">
                                                    <columns>
                                                        <TableColumn fx:id="colDetailProductName" prefWidth="250.0" text="%table.col.productName"/> <!-- KEY -->
                                                        <TableColumn fx:id="colDetailQuantity" prefWidth="100.0" text="%table.col.quantity"/> <!-- KEY -->
                                                        <TableColumn fx:id="colDetailUnitCost" prefWidth="120.0" text="%table.col.unitCostImport"/> <!-- KEY -->
                                                        <TableColumn fx:id="colDetailSubtotal" prefWidth="120.0" text="%table.col.subtotal"/> <!-- KEY -->
                                                        <TableColumn fx:id="colDetailRemoveAction" prefWidth="80.0" text="%table.col.remove"/> <!-- KEY -->
                                                    </columns>
                                                    <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                                                </TableView>
                                                <HBox alignment="CENTER_RIGHT" spacing="10.0">
                                                    <Label text="%label.totalImportAmount" style="-fx-font-weight: bold;"/> <!-- KEY -->
                                                    <Label fx:id="lblImportTotalAmount" text="0 đ" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #D53F8C;"/>
                                                </HBox>
                                                <HBox spacing="10.0" alignment="CENTER_RIGHT" style="-fx-padding: 10 0 0 0;">
                                                    <children>
                                                        <Button fx:id="btnSaveImportReceipt" mnemonicParsing="false" onAction="#handleSaveImportReceiptAction" text="%button.saveImportReceipt" style="..."/> <!-- KEY -->
                                                        <Button fx:id="btnCancelImportReceipt" mnemonicParsing="false" onAction="#handleCancelImportReceiptAction" text="%button.cancelCreateReceipt" style="..."/> <!-- KEY -->
                                                    </children>
                                                </HBox>
                                            </VBox>
                                        </AnchorPane>
                                    </bottom>
                                </BorderPane>
                            </content>
                        </Tab>
                    </tabs>
                </TabPane>
            </children>
        </VBox>
    </children>
</AnchorPane>